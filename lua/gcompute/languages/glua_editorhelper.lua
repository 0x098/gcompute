local self = EditorHelperfunction self:GetNewLineIndentation (codeEditor, location)	local line = codeEditor:GetDocument ():GetLine (location:GetLine ())	local baseIndentation = string.match (line:GetText (), "^[ \t]*")	local beforeCaret = " " .. line:Sub (1, location:GetCharacter ()) .. " "		local doString       = string.match (beforeCaret, "^.*[^a-zA-Z0-9]do[^a-zA-Z0-9]")       or ""	local repeatString   = string.match (beforeCaret, "^.*[^a-zA-Z0-9]repeat[^a-zA-Z0-9]")   or ""	local thenString     = string.match (beforeCaret, "^.*[^a-zA-Z0-9]then[^a-zA-Z0-9]")     or ""	local functionString = string.match (beforeCaret, "^.*[^a-zA-Z0-9]function[^a-zA-Z0-9]") or ""	local found = doString ~= "" or repeatString ~= "" or thenString ~= "" or functionString ~= ""	local endSearchStart = math.max (		string.len (doString),		string.len (repeatString),		string.len (thenString),		string.len (functionString)	)		local isRepeat = endSearchStart == string.len (repeatString)		if found then		if isRepeat then			if not string.find (beforeCaret, "[^a-zA-Z0-9]until[^a-zA-Z0-9]", endSearchStart) then				return baseIndentation .. "\t"			end		else			if not string.find (beforeCaret, "[^a-zA-Z0-9]end[^a-zA-Z0-9]", endSearchStart) then				return baseIndentation .. "\t"			end		end	end	if beforeCaret:find ("{[^}]*$") then		return baseIndentation .. "\t"	end	return baseIndentationendfunction self:Run (codeEditor, compilerStdOut, compilerStdErr, stdOut, stdErr)	RunStringEx (codeEditor:GetText (), codeEditor:GetSourceFile ():GetId ())end